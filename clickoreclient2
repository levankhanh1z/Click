local replicatedStorage = game:GetService("ReplicatedStorage")
local mineOreFunction = replicatedStorage:WaitForChild("MineOre")
local pinglessMineEvent = replicatedStorage:WaitForChild("PinglessMine")

-- Lưu trữ Adornee cũ để so sánh
local lastAdorneeName = ""

-- Chạy trong vòng lặp vô hạn
while true do
    wait(0.1)  -- Đợi 0.1 giây để giảm tải

    -- Lấy đối tượng SelectionBox trong workspace
    local selectionBox = workspace.Debris.Plr.tking12z.Pickaxe.Pickaxe.Selection

    if selectionBox and selectionBox:IsA("SelectionBox") and selectionBox.Adornee then
        local adorneeName = selectionBox.Adornee.Name

        -- Kiểm tra xem Adornee có thay đổi so với Adornee trước không
        if adorneeName ~= lastAdorneeName then
            lastAdorneeName = adorneeName

            -- Nếu tên của Adornee và SelectionBox giống nhau
            if adorneeName == selectionBox.Name then
                -- Gọi RemoteFunction với đối tượng là Adornee của SelectionBox
                local success, result = pcall(function()
                    return mineOreFunction:InvokeServer(selectionBox.Adornee)
                   
                end)

                if not success then
                    warn("Error calling MineOre RemoteFunction:", result)
                end

                -- Kiểm tra điều kiện giống nhau trước khi gửi sự kiện PinglessMine
                if result == "SomeCondition" then
                    pinglessMineEvent:FireServer()
                   
                end
            end
        end
    else
        -- Nếu không tìm thấy SelectionBox hoặc Adornee, đặt lastAdorneeName về rỗng
        lastAdorneeName = ""
    end
end
